<link rel="import" href="../polymer/polymer.html">

<dom-module id="socket-io-receiver">
  <template>

  </template>

  <script>
    Polymer(
    {
      is: 'socket-io-receiver',

      properties:
      {
        on:
        {
          type: String
        },
        socket:
        {
          type: Object
        },
        data:
        {
          type: String,
          notify: true
        }
      },
      ready: function()
      {
        let parent = Polymer.dom(this).parentNode;

        this.socket = parent.socket; // TODO: recursive parent Searching

        this.socket.on(this.on, (data) =>
        {
          this.data = data;
          this.fire("received", data);
        });
      }
    });
  </script>
</dom-module>
